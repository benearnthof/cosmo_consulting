<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Convert a Cox proportional hazard model into Poisson...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for inla.coxph {INLA}"><tr><td>inla.coxph {INLA}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Convert a Cox proportional hazard model into Poisson regression</h2>

<h3>Description</h3>

<p>Tools to convert a Cox proportional hazard model into Poisson regression</p>


<h3>Usage</h3>

<pre>
    inla.coxph(formula, data, control.hazard = list(), tag="", debug=FALSE)
    inla.rbind.data.frames(...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>formula</code></td>
<td>
<p>The formula for the coxph model where the reponse must be a <code>inla.surv</code>-object.</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>All the data used in the formula,  as a list.</p>
</td></tr>
<tr valign="top"><td><code>control.hazard</code></td>
<td>
<p>Control the model for the baseline-hazard; see <code>?control.hazard</code>.</p>
</td></tr>
<tr valign="top"><td><code>tag</code></td>
<td>
<p>An optional tag added to the names of the new variables created (to make them
unique when combined with several calls of <code>inla.coxph</code>. Note that 
<code>E..coxph</code> is not included,  as its usually merged into one 
vector over different expansions.</p>
</td></tr>
<tr valign="top"><td><code>debug</code></td>
<td>
<p>Print debug-information</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Data.frames to be <code>rbind</code>-ed,  padding with <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>inla.coxph</code> returns a list of new expanded variables to be used in the <code>inla</code>-call.
Note that element <code>data</code> and <code>data.list</code> needs to be merged into
a <code>list</code> to be passed as the <code>data</code> argument. See the example for details.
</p>
<p><code>inla.rbind.data.frames</code> returns the rbinded data.frames padded with NAs.
There is a better
implementation in <code>dplyr::bind_rows</code>, which is used if package <code>dplyr</code> is
installed.
</p>


<h3>Author(s)</h3>

<p>Havard Rue <a href="mailto:hrue@r-inla.org">hrue@r-inla.org</a></p>


<h3>Examples</h3>

<pre>
## How the cbind.data.frames works:
df1 = data.frame(x=1:2, y=2:3, z=3:4)
df2 = data.frame(x=3:4, yy=4:5, zz=5:6)
inla.rbind.data.frames(df1, df2)

## Standard example of how to convert a coxph into a Poisson regression
n = 1000
x = runif(n)
lambda = exp(1+x)
y = rexp(n, rate=lambda)
event = rep(1,n)
data = list(y=y, event=event, x=x)
y.surv = inla.surv(y, event)
intercept1 = rep(1, n)
p = inla.coxph(y.surv ~ -1 + intercept1 + x,
               list(y.surv = y.surv,  x=x, intercept1 = intercept1))

r = inla(p$formula,
        family = p$family,
        data=c(as.list(p$data), p$data.list),
        E = p$E)
summary(r)

## How to use this in a joint model
intercept2 = rep(1, n)
y = 1 + x + rnorm(n, sd=0.1)
df = data.frame(intercept2, x, y)

## new need to cbind the data.frames, and then add the list-part of
## the data
df.joint = c(as.list(inla.rbind.data.frames(p$data, df)), p$data.list)
df.joint$Y = cbind(df.joint$y..coxph, df.joint$y)

## merge the formulas, recall to add '-1' and to use the new joint
## reponse 'Y'
formula = update(p$formula, Y ~ intercept2 -1 + .)

rr = inla(formula,
        family = c(p$family, "gaussian"),
        data = df.joint,
        E = df.joint$E..coxph)
</pre>

<hr /><div style="text-align: center;">[Package <em>INLA</em> version 22.02.16-2 <a href="00Index.html">Index</a>]</div>
</div></body></html>
